#: include ./ui/components/button.kv
#: include ./ui/components/button_container.kv

<ToolBar@MDBoxLayout>:
    id: title_bar
    adaptive_height: True
    size_hint_x: 1
    size_hint_y: 0.07
    orientation: "horizontal"
    md_bg_color: 0,0,0,0
    padding: dp(3)
    
    MDRectangleFlatIconButton:
        size_hint_y: 1
        icon: "card-plus-outline"
        text: "New"
        line_color: 0,0,0,.2
        text_color: "black"
        icon_color: self.text_color
        md_bg_color: get_color_from_hex("#FFFFFF")

    MDBoxLayout:
        orientation: "horizontal"
        size_hint_x: 1  
        spacing: dp(5)
        padding: dp(10), 0

        ButtonContainer:
                    
            CustomButton:
                elevation: 10
                size_hint_y: 1
                size_hint_x: .5
                icon: "undo-variant"
                on_release: app.redo()
                md_bg_color: get_color_from_hex("#FFFFFF")

            CustomButton:
                elevation: 10
                size_hint_y: 1
                size_hint_x: .5
                icon: "redo-variant"
                on_release: app.undo()
                md_bg_color: get_color_from_hex("#FFFFFF")

        
        ButtonContainer:
            width: dp(200)
            CustomButton:
                size_hint_y: 1
                size_hint_x: .5
                icon: "eraser"
                on_release: app.active_tool, app.statusbar_tool, app.statusbar_icon = "eraser", "Eraser", "eraser"
                md_bg_color: get_color_from_hex("#FFFFFF") if app.active_tool != "eraser" else [255,255,255,0]
            
            CustomButton:
                size_hint_y: 1
                size_hint_x: .5
                icon: "draw-pen"
                on_press: app.open_dropdown("pencil", self)
                md_bg_color: get_color_from_hex("#FFFFFF") if app.active_tool != "pencil" else [255,255,255,0]

            CustomButton:
                size_hint_y: 1
                size_hint_x: .5
                id: shapes_btn
                icon: "vector-line"
                on_press: app.open_dropdown("shape", self)
                md_bg_color: get_color_from_hex("#FFFFFF") if app.active_tool != "shape" else [255,255,255,0]
            
            CustomButton:
                size_hint_y: 1
                size_hint_x: .5
                icon: "format-text"
                on_release: app.active_tool, app.statusbar_tool, app.statusbar_icon = "text", "text", "format-text"
                md_bg_color: get_color_from_hex("#FFFFFF") if app.active_tool != "text" else [255,255,255,0]

        ButtonContainer:
            width: dp(100)
            CustomButton:
                size_hint_y: 1
                size_hint_x: .5
                icon: "invert-colors"
                on_release: app.color_fill = True if not app.color_fill else False
                md_bg_color: get_color_from_hex("#FFFFFF") if not app.color_fill else [255,255,255,0]
            
            CustomButton:
                size_hint_y: 1
                size_hint_x: .5
                icon: "dots-square"
                on_release: app.dotted_line = True if not app.dotted_line else False
                md_bg_color: get_color_from_hex("#FFFFFF") if not app.dotted_line else [255,255,255,0]

        ButtonContainer:
            CustomButton:
                size_hint_y: 1
                size_hint_x: .5
                icon: "format-color-fill"
                md_bg_color: get_color_from_hex("#FFFFFF")
                on_press: app.open_color_picker(self)

            CustomButton:
                size_hint_y: 1
                size_hint_x: .5
                icon: "file-image"
                md_bg_color: get_color_from_hex("#FFFFFF")
                on_release: app.file_manager_open(self)
            
